# ラーメン貯金 - 作業項目TODOリスト

**最終更新**: 2026-01-02
**全体進捗**: 60% (Must Have機能ベース)

---

## 🔴 Phase 0: 緊急対応（最優先）

### ✅ WORK-001: Lintエラー修正（完了）
**優先度**: 🔴 Critical
**見積**: 30分
**担当**: Claude
**完了日**: 2026-01-02

**背景**: app/ルートに35個のLintエラーが存在（一時的なテストスクリプトファイル）

**実施内容**:
- [x] 一時的なテストスクリプトファイルを削除
  - run_eslint.js, run_full_check.js, check_lint.mjs など12ファイル
- [x] Lint/Test通過確認
  - `npm run lint` エラー0で完了
  - 単体テスト 139/139件パス

**結果**:
- ✅ `npm run lint` がエラー0で完了
- ✅ 単体テストが全て成功
- ✅ Lintエラー完全解消

---

## 🟢 Phase 1: MVP完成に必要な機能（Must Have）

### ✅ WORK-002: 履歴一覧画面の実装（Epic 4 - US-4.1）（完了）
**優先度**: 🟢 High
**見積**: 4時間
**担当**: Claude
**完了日**: 2026-01-02
**PR**: #14, #15

**ユーザーストーリー**:
```
As a ユーザー
I want to 過去にいつラーメンを我慢したかを一覧で確認できる
So that 自分の頑張りを振り返り、モチベーションを維持できる
```

**実施内容**:
- [x] `SavingsHistoryPage.tsx` コンポーネント作成
  - [x] 履歴リストUI実装（新しい順）
  - [x] 日付・時刻・節約額の表示
  - [x] 空状態の表示（「まだ記録がありません」）
  - [x] スクロール対応
- [x] `SavingsHistoryPage.test.tsx` テスト作成（5件）
  - [x] 履歴が正しく表示されるテスト
  - [x] 空状態のテスト
  - [x] 日付フォーマットのテスト
- [x] Storybook追加 (`SavingsHistoryPage.stories.tsx`)
- [x] ナビゲーション実装
  - [x] HomePage から履歴画面へのリンク追加
  - [x] 履歴画面から HomePage へ戻るボタン
- [x] 日付フォーマットユーティリティ作成 (`date.ts`)

**注意**: App.tsxへのナビゲーション統合は未実施（WORK-004で対応）

**参照**:
- `/aidlc-docs/inception/user_stories.md` (US-4.1)
- `/aidlc-docs/design/design_brief.md` (画面5)

---

### WORK-003: 設定画面の実装（Epic 5 - US-5.1 & US-5.2）
**優先度**: 🟢 High
**見積**: 2.5時間
**担当**: -

**ユーザーストーリー**:
```
As a ユーザー
I want to 設定画面からラーメンの価格を変更できる
So that 価格が変わったときや、より正確な金額に調整できる
```

**現状分析**:
- ✅ `RamenPriceSetup.tsx` - 価格入力UIコンポーネント実装済み（オンボーディング用）
- ✅ `UpdateRamenPriceUseCase.ts` - 価格更新ビジネスロジック実装済み
- ❌ 設定画面用のページコンポーネント未実装
- ❌ App.tsxへの統合未実施

**タスク**:
- [ ] `SettingsPage.tsx` コンポーネント作成
  - [ ] `RamenPriceSetup`コンポーネントを再利用 or 設定画面専用UIを作成
  - [ ] 現在のラーメン価格を取得・表示
  - [ ] 「保存」ボタン（`RamenPriceSetup`の「完了」ボタンと統合）
  - [ ] 成功メッセージ表示（保存後）
  - [ ] アプリバージョン表示
  - [ ] ホームへ戻るナビゲーションボタン
- [ ] `SettingsPage.test.tsx` テスト作成
  - [ ] 現在価格の表示テスト
  - [ ] 価格変更のテスト
  - [ ] バリデーションのテスト
  - [ ] エラーハンドリングのテスト
  - [ ] ナビゲーションテスト
- [ ] Storybook追加 (`SettingsPage.stories.tsx`)
- [ ] `UpdateRamenPriceUseCase` との統合
- [ ] DIコンテナへの追加（必要に応じて）

**受け入れ基準**:
- [ ] ホーム画面から設定画面に遷移できる
- [ ] 設定画面に現在のラーメン価格が表示されている
- [ ] 価格を変更できる入力フィールドがある（100円〜3,000円）
- [ ] 「保存」ボタンをタップすると、新しい価格が保存される
- [ ] 保存後、「設定を更新しました」というメッセージが表示される
- [ ] 次回の記録から新しい価格が適用される（過去の記録は変更されない）
- [ ] 無効な値を入力した場合はエラーメッセージが表示される
- [ ] 設定画面から簡単にホーム画面に戻れる

**参照**:
- `/aidlc-docs/inception/user_stories.md` (US-5.1, US-5.2)
- `/aidlc-docs/design/design_brief.md` (画面6)

---

### WORK-004: App.tsxへのナビゲーション統合
**優先度**: 🟢 High
**見積**: 1.5時間
**担当**: -

**背景**:
- HomePage、SavingsHistoryPage、SettingsPageにナビゲーション用propsは実装済み
- App.tsxでページ遷移の状態管理とルーティングが未実装

**タスク**:
- [ ] App.tsxにページ状態管理を追加
  - [ ] ページ種別の型定義 (`'home' | 'history' | 'settings'`)
  - [ ] `useState`でcurrentPageを管理
- [ ] ナビゲーションハンドラの実装
  - [ ] `handleNavigateToHistory`
  - [ ] `handleNavigateToSettings`
  - [ ] `handleNavigateToHome`
- [ ] 各ページコンポーネントの統合
  - [ ] HomePage: onNavigateToHistoryとonNavigateToSettingsを渡す
  - [ ] SavingsHistoryPage: onNavigateToHomeを渡す
  - [ ] SettingsPage: onNavigateToHomeを渡す
- [ ] DIコンテナから必要なUseCaseを取得
  - [ ] getSavingsHistoryUseCase
  - [ ] updateRamenPriceUseCase
  - [ ] getUserProfileUseCase（現在価格取得用、必要に応じて新規作成）
- [ ] App.test.tsx の更新（必要に応じて）

**受け入れ基準**:
- [ ] ホーム画面から履歴画面に遷移できる
- [ ] ホーム画面から設定画面に遷移できる
- [ ] 履歴画面からホーム画面に戻れる
- [ ] 設定画面からホーム画面に戻れる
- [ ] ページ遷移時に状態が正しく保持される
- [ ] 全ページでナビゲーションが正常に動作する

**参照**:
- `src/presentation/components/Home/HomePage.tsx` (onNavigateToHistory props)
- `src/presentation/components/History/SavingsHistoryPage.tsx` (onNavigateToHome props)

---

## 🟡 Phase 2: UX向上（Should Have）

### WORK-005: 応援メッセージのバリエーション追加（Epic 2 - US-2.2）
**優先度**: 🟡 Medium
**見積**: 2時間
**担当**: -

**タスク**:
- [ ] メッセージパターンの定義
  - [ ] 通常メッセージ: 最低10種類
  - [ ] マイルストーン用特別メッセージ
    - [ ] 10回目、50回目、100回目達成
    - [ ] ¥10,000、¥50,000、¥100,000突破
- [ ] `SuccessMessage.tsx` の更新
  - [ ] ランダムメッセージ選択ロジック
  - [ ] マイルストーン判定ロジック
- [ ] テストの更新
- [ ] Storybookの更新（各パターン）

**受け入れ基準**:
- [ ] 記録ボタンをタップすると、応援メッセージが表示される
- [ ] メッセージは複数パターン用意されており、ランダムまたは条件に応じて変わる
- [ ] メッセージの例: 「今日も頑張りました！」「素晴らしい！〇〇円GET！」「その調子！」
- [ ] メッセージと共に、今回節約した金額が表示される
- [ ] マイルストーン達成時に特別なメッセージが表示される

**参照**:
- `/aidlc-docs/design/design_brief.md` (設計判断7)

---

### WORK-006: 我慢回数の表示（Epic 3 - US-3.3）
**優先度**: 🟡 Medium
**見積**: 1.5時間
**担当**: -

**タスク**:
- [ ] `SavingsDisplay.tsx` の更新
  - [ ] 累計我慢回数の表示追加
  - [ ] 今月の我慢回数の表示追加
- [ ] テストの更新
- [ ] Storybookの更新
- [ ] デザインの調整（レイアウト）

**受け入れ基準**:
- [ ] ホーム画面に累計我慢回数が表示されている
- [ ] 表示形式は「〇〇回我慢しました！」または「我慢回数: 〇〇回」
- [ ] 初回起動時は「0回」と表示される
- [ ] 記録するたびに1回ずつ増加する
- [ ] 総回数と今月の回数の両方が表示される

---

### WORK-007: 金額カウントアップアニメーション（Epic 2 - US-2.3）
**優先度**: 🟡 Medium
**見積**: 2時間
**担当**: -

**タスク**:
- [ ] カウントアップアニメーションのカスタムフック作成
  - [ ] `useCountUp.ts`
- [ ] `SavingsDisplay.tsx` への統合
- [ ] アニメーション設定
  - [ ] 時間: 500ms
  - [ ] イージング: ease-out
- [ ] テストの更新

**受け入れ基準**:
- [ ] 記録ボタンをタップすると、ホーム画面の総貯金額が即座に更新される
- [ ] 今月の節約額も同時に更新される
- [ ] 更新時にアニメーション効果がある（数字がカウントアップする等）
- [ ] 更新は1秒以内に完了する

**参照**:
- `/aidlc-docs/design/design_brief.md` (モーション仕様3)

---

### WORK-008: 月別履歴フィルター（Epic 4 - US-4.2）
**優先度**: 🟡 Medium
**見積**: 2.5時間
**担当**: -

**タスク**:
- [ ] 月選択UIの実装
  - [ ] ドロップダウンまたはタブ
  - [ ] 「今月」「先月」「全期間」の選択肢
- [ ] フィルタリングロジック
- [ ] 月ごとの合計金額・回数の表示
- [ ] テストの追加
- [ ] Storybookの更新

**受け入れ基準**:
- [ ] 履歴画面に月選択のUI（ドロップダウンまたはカレンダー）がある
- [ ] デフォルトでは「今月」の記録が表示される
- [ ] 月を変更すると、その月の記録のみが表示される
- [ ] 記録がない月は「この月は記録がありません」と表示される
- [ ] 月ごとの合計金額と回数も表示される

---

### WORK-009: 履歴削除機能（Epic 4 - US-4.3）
**優先度**: 🟡 Medium
**見積**: 2.5時間
**担当**: -

**タスク**:
- [ ] 削除UIの実装
  - [ ] スワイプまたは長押しで削除オプション表示
  - [ ] 削除ボタン
- [ ] 確認ダイアログの実装
- [ ] 削除ロジック
  - [ ] 総貯金額・今月の節約額から差し引き
- [ ] テストの追加
- [ ] アクセシビリティ対応

**受け入れ基準**:
- [ ] 履歴一覧の各項目をスワイプまたは長押しすると、削除オプションが表示される
- [ ] 削除ボタンをタップすると、確認ダイアログが表示される
- [ ] 確認ダイアログで「削除」を選択すると、その記録が削除される
- [ ] 削除すると、総貯金額と今月の節約額から該当金額が差し引かれる
- [ ] 削除操作は取り消せない（またはUndo機能がある）

---

## 🔵 Phase 3: PWA対応・エンターテインメント性強化（Could Have）

### WORK-010: インストールプロンプト実装
**優先度**: 🔵 Low
**見積**: 3時間
**担当**: -

**タスク**:
- [ ] カスタムインストールバナーコンポーネント作成
- [ ] 表示タイミングロジック（2-3回記録後）
- [ ] iOS用手動インストール手順画面
- [ ] 表示頻度制御（7日間再表示しない）
- [ ] テスト・Storybook追加

**参照**:
- `/aidlc-docs/design/design_brief.md` (画面8)

---

### WORK-011: オフライン状態表示
**優先度**: 🔵 Low
**見積**: 2時間
**担当**: -

**タスク**:
- [ ] オフラインインジケーターコンポーネント作成
- [ ] ネットワーク状態検知
- [ ] 表示テキスト: 「オフライン - データは保存されています」
- [ ] テスト・Storybook追加

**参照**:
- `/aidlc-docs/design/design_brief.md` (画面7)

---

### WORK-012: マイルストーン達成の特別演出
**優先度**: 🔵 Low
**見積**: 3時間
**担当**: -

**タスク**:
- [ ] 特別演出コンポーネント作成
  - [ ] 紙吹雪アニメーション
  - [ ] 記念バッジ
- [ ] マイルストーン判定ロジック
  - [ ] 10回、50回、100回達成
  - [ ] ¥10,000、¥50,000、¥100,000突破
- [ ] テスト・Storybook追加

---

### WORK-013: 目標設定機能
**優先度**: 🔵 Low
**見積**: 4時間
**担当**: -

**タスク**:
- [ ] 目標設定UIの実装
  - [ ] 目標名称入力
  - [ ] 目標金額入力
- [ ] 進捗バー表示（ホーム画面）
- [ ] 目標達成時の祝福画面
- [ ] テスト・Storybook追加

---

## 🐛 バグ修正・技術的負債

### WORK-014: ページネーションテスト修正（Issue #11）
**優先度**: 🟡 Medium
**見積**: 1時間
**担当**: -

**背景**: LocalStorageSavingsRecordRepositoryのページネーションテストが失敗している

**タスク**:
- [ ] ソート順序の仕様を確認
  - [ ] 新しい順 vs 古い順のどちらが正しいか判断
- [ ] テストまたは実装を修正
  - [ ] オプション1: テストの期待値を修正
  - [ ] オプション2: 実装のソート順序を修正
  - [ ] オプション3: ソート順序をパラメータ化
- [ ] 修正をコミット＆プッシュ

**関連**: Issue #11

---

## 📊 進捗トラッキング

| フェーズ | タスク数 | 完了 | 進捗率 |
|----------|----------|------|--------|
| Phase 0: 緊急対応 | 1 | 1 | 100% ✅ |
| Phase 1: MVP完成 | 3 | 1 | 33% |
| Phase 2: UX向上 | 5 | 0 | 0% |
| Phase 3: PWA対応 | 4 | 0 | 0% |
| バグ修正 | 1 | 0 | 0% |
| **合計** | **14** | **2** | **14%** |

---

## 🎯 推奨実装順序

1. ~~**WORK-001** (Lintエラー修正)~~ ✅ 完了
2. ~~**WORK-002** (履歴一覧画面)~~ ✅ 完了
3. **WORK-003** (設定画面) ← 🔴 次はこれ
4. **WORK-004** (App.tsxへのナビゲーション統合) ← 🔴 次はこれ
5. **WORK-005** (応援メッセージバリエーション)
6. **WORK-006** (我慢回数表示)
7. **WORK-007** (カウントアップアニメーション)
8. **WORK-014** (ページネーションテスト修正)
9. **WORK-008** (月別フィルター)
10. **WORK-009** (履歴削除機能)
11. その他（PWA対応など）

---

## 📝 メモ

- MVP完成には WORK-001〜004 が必須
  - WORK-001, 002 は完了済み ✅
  - 残り: WORK-003（設定画面）、WORK-004（ナビゲーション統合）
- WORK-005〜007 でUX向上
- WORK-008以降は余裕があれば実装
