# ラーメン貯金 - 作業項目TODOリスト

**最終更新**: 2026-01-02
**全体進捗**: 100% (Must Have機能ベース - MVP完成！)

---

## 🔴 Phase 0: 緊急対応（最優先）

### ✅ WORK-001: Lintエラー修正（完了）
**優先度**: 🔴 Critical
**見積**: 30分
**担当**: Claude
**完了日**: 2026-01-02

**背景**: app/ルートに35個のLintエラーが存在（一時的なテストスクリプトファイル）

**実施内容**:
- [x] 一時的なテストスクリプトファイルを削除
  - run_eslint.js, run_full_check.js, check_lint.mjs など12ファイル
- [x] Lint/Test通過確認
  - `npm run lint` エラー0で完了
  - 単体テスト 139/139件パス

**結果**:
- ✅ `npm run lint` がエラー0で完了
- ✅ 単体テストが全て成功
- ✅ Lintエラー完全解消

---

## 🟢 Phase 1: MVP完成に必要な機能（Must Have）

### ✅ WORK-002: 履歴一覧画面の実装（Epic 4 - US-4.1）（完了）
**優先度**: 🟢 High
**見積**: 4時間
**担当**: Claude
**完了日**: 2026-01-02
**PR**: #14, #15

**ユーザーストーリー**:
```
As a ユーザー
I want to 過去にいつラーメンを我慢したかを一覧で確認できる
So that 自分の頑張りを振り返り、モチベーションを維持できる
```

**実施内容**:
- [x] `SavingsHistoryPage.tsx` コンポーネント作成
  - [x] 履歴リストUI実装（新しい順）
  - [x] 日付・時刻・節約額の表示
  - [x] 空状態の表示（「まだ記録がありません」）
  - [x] スクロール対応
- [x] `SavingsHistoryPage.test.tsx` テスト作成（5件）
  - [x] 履歴が正しく表示されるテスト
  - [x] 空状態のテスト
  - [x] 日付フォーマットのテスト
- [x] Storybook追加 (`SavingsHistoryPage.stories.tsx`)
- [x] ナビゲーション実装
  - [x] HomePage から履歴画面へのリンク追加
  - [x] 履歴画面から HomePage へ戻るボタン
- [x] 日付フォーマットユーティリティ作成 (`date.ts`)

**注意**: App.tsxへのナビゲーション統合は未実施（WORK-004で対応）

**参照**:
- `/aidlc-docs/inception/user_stories.md` (US-4.1)
- `/aidlc-docs/design/design_brief.md` (画面5)

---

### ✅ WORK-003: 設定画面の実装（Epic 5 - US-5.1 & US-5.2）（完了）
**優先度**: 🟢 High
**見積**: 2.5時間
**担当**: Claude
**完了日**: 2026-01-02
**PR**: #16

**ユーザーストーリー**:
```
As a ユーザー
I want to 設定画面からラーメンの価格を変更できる
So that 価格が変わったときや、より正確な金額に調整できる
```

**実施内容**:
- [x] `GetUserProfileUseCase.ts` 作成
  - [x] 現在の価格取得ロジック
  - [x] テスト作成（3件）
- [x] `SettingsPage.tsx` コンポーネント作成
  - [x] 現在のラーメン価格を取得・表示
  - [x] 価格変更フォーム（100-3000円バリデーション）
  - [x] 「保存」ボタン
  - [x] 成功メッセージ表示
  - [x] エラーメッセージ表示
  - [x] アプリバージョン表示（0.0.0）
  - [x] ホームへ戻るナビゲーションボタン
- [x] `SettingsPage.test.tsx` テスト作成（14件）
  - [x] 現在価格の表示テスト
  - [x] 価格変更のテスト
  - [x] バリデーションのテスト（空、最小値未満、最大値超過）
  - [x] エラーハンドリングのテスト
  - [x] ナビゲーションテスト
- [x] Storybook追加 (`SettingsPage.stories.tsx` - 4ストーリー)
- [x] DIコンテナへの追加
  - [x] getUserProfileUseCase
  - [x] updateRamenPriceUseCase

**結果**:
- ✅ 全ての受け入れ基準を満たす実装完了
- ✅ 単体テスト 148/148件パス
- ✅ Lintエラー0

**参照**:
- `/aidlc-docs/inception/user_stories.md` (US-5.1, US-5.2)
- `/aidlc-docs/design/design_brief.md` (画面6)

---

### ✅ WORK-004: App.tsxへのナビゲーション統合（完了）
**優先度**: 🟢 High
**見積**: 1.5時間
**担当**: Claude
**完了日**: 2026-01-02
**PR**: #16

**背景**:
- HomePage、SavingsHistoryPage、SettingsPageにナビゲーション用propsは実装済み
- App.tsxでページ遷移の状態管理とルーティングが未実装

**実施内容**:
- [x] App.tsxにページ状態管理を追加
  - [x] ページ種別の型定義 (`'home' | 'history' | 'settings'`)
  - [x] `useState`でcurrentPageを管理
- [x] ナビゲーションハンドラの実装
  - [x] `handleNavigateToHistory`
  - [x] `handleNavigateToSettings`
  - [x] `handleNavigateToHome`
- [x] 各ページコンポーネントの統合
  - [x] HomePage: onNavigateToHistoryとonNavigateToSettingsを渡す（設定ボタンに歯車アイコン追加）
  - [x] SavingsHistoryPage: onNavigateToHomeを渡す
  - [x] SettingsPage: onNavigateToHomeを渡す
- [x] DIコンテナから必要なUseCaseを取得
  - [x] getSavingsHistoryUseCase
  - [x] updateRamenPriceUseCase
  - [x] getUserProfileUseCase

**結果**:
- ✅ 全ての受け入れ基準を満たす実装完了
- ✅ ホーム↔履歴↔設定のページ遷移が完全に動作
- ✅ 全ページでナビゲーションボタンが適切に表示される

**参照**:
- `src/App.tsx`
- `src/presentation/components/Home/HomePage.tsx`
- `src/presentation/components/History/SavingsHistoryPage.tsx`
- `src/presentation/components/Settings/SettingsPage.tsx`

---

## 🟡 Phase 2: UX向上（Should Have）

### WORK-005: 応援メッセージのバリエーション追加（Epic 2 - US-2.2）
**優先度**: 🟡 Medium
**見積**: 2時間
**担当**: -

**タスク**:
- [ ] メッセージパターンの定義
  - [ ] 通常メッセージ: 最低10種類
  - [ ] マイルストーン用特別メッセージ
    - [ ] 10回目、50回目、100回目達成
    - [ ] ¥10,000、¥50,000、¥100,000突破
- [ ] `SuccessMessage.tsx` の更新
  - [ ] ランダムメッセージ選択ロジック
  - [ ] マイルストーン判定ロジック
- [ ] テストの更新
- [ ] Storybookの更新（各パターン）

**受け入れ基準**:
- [ ] 記録ボタンをタップすると、応援メッセージが表示される
- [ ] メッセージは複数パターン用意されており、ランダムまたは条件に応じて変わる
- [ ] メッセージの例: 「今日も頑張りました！」「素晴らしい！〇〇円GET！」「その調子！」
- [ ] メッセージと共に、今回節約した金額が表示される
- [ ] マイルストーン達成時に特別なメッセージが表示される

**参照**:
- `/aidlc-docs/design/design_brief.md` (設計判断7)

---

### WORK-006: 我慢回数の表示（Epic 3 - US-3.3）
**優先度**: 🟡 Medium
**見積**: 1.5時間
**担当**: -

**タスク**:
- [ ] `SavingsDisplay.tsx` の更新
  - [ ] 累計我慢回数の表示追加
  - [ ] 今月の我慢回数の表示追加
- [ ] テストの更新
- [ ] Storybookの更新
- [ ] デザインの調整（レイアウト）

**受け入れ基準**:
- [ ] ホーム画面に累計我慢回数が表示されている
- [ ] 表示形式は「〇〇回我慢しました！」または「我慢回数: 〇〇回」
- [ ] 初回起動時は「0回」と表示される
- [ ] 記録するたびに1回ずつ増加する
- [ ] 総回数と今月の回数の両方が表示される

---

### WORK-007: 金額カウントアップアニメーション（Epic 2 - US-2.3）
**優先度**: 🟡 Medium
**見積**: 2時間
**担当**: -

**タスク**:
- [ ] カウントアップアニメーションのカスタムフック作成
  - [ ] `useCountUp.ts`
- [ ] `SavingsDisplay.tsx` への統合
- [ ] アニメーション設定
  - [ ] 時間: 500ms
  - [ ] イージング: ease-out
- [ ] テストの更新

**受け入れ基準**:
- [ ] 記録ボタンをタップすると、ホーム画面の総貯金額が即座に更新される
- [ ] 今月の節約額も同時に更新される
- [ ] 更新時にアニメーション効果がある（数字がカウントアップする等）
- [ ] 更新は1秒以内に完了する

**参照**:
- `/aidlc-docs/design/design_brief.md` (モーション仕様3)

---

### WORK-008: 月別履歴フィルター（Epic 4 - US-4.2）
**優先度**: 🟡 Medium
**見積**: 2.5時間
**担当**: -

**タスク**:
- [ ] 月選択UIの実装
  - [ ] ドロップダウンまたはタブ
  - [ ] 「今月」「先月」「全期間」の選択肢
- [ ] フィルタリングロジック
- [ ] 月ごとの合計金額・回数の表示
- [ ] テストの追加
- [ ] Storybookの更新

**受け入れ基準**:
- [ ] 履歴画面に月選択のUI（ドロップダウンまたはカレンダー）がある
- [ ] デフォルトでは「今月」の記録が表示される
- [ ] 月を変更すると、その月の記録のみが表示される
- [ ] 記録がない月は「この月は記録がありません」と表示される
- [ ] 月ごとの合計金額と回数も表示される

---

### WORK-009: 履歴削除機能（Epic 4 - US-4.3）
**優先度**: 🟡 Medium
**見積**: 2.5時間
**担当**: -

**タスク**:
- [ ] 削除UIの実装
  - [ ] スワイプまたは長押しで削除オプション表示
  - [ ] 削除ボタン
- [ ] 確認ダイアログの実装
- [ ] 削除ロジック
  - [ ] 総貯金額・今月の節約額から差し引き
- [ ] テストの追加
- [ ] アクセシビリティ対応

**受け入れ基準**:
- [ ] 履歴一覧の各項目をスワイプまたは長押しすると、削除オプションが表示される
- [ ] 削除ボタンをタップすると、確認ダイアログが表示される
- [ ] 確認ダイアログで「削除」を選択すると、その記録が削除される
- [ ] 削除すると、総貯金額と今月の節約額から該当金額が差し引かれる
- [ ] 削除操作は取り消せない（またはUndo機能がある）

---

## 🔵 Phase 3: PWA対応・エンターテインメント性強化（Could Have）

### WORK-010: インストールプロンプト実装
**優先度**: 🔵 Low
**見積**: 3時間
**担当**: -

**タスク**:
- [ ] カスタムインストールバナーコンポーネント作成
- [ ] 表示タイミングロジック（2-3回記録後）
- [ ] iOS用手動インストール手順画面
- [ ] 表示頻度制御（7日間再表示しない）
- [ ] テスト・Storybook追加

**参照**:
- `/aidlc-docs/design/design_brief.md` (画面8)

---

### WORK-011: オフライン状態表示
**優先度**: 🔵 Low
**見積**: 2時間
**担当**: -

**タスク**:
- [ ] オフラインインジケーターコンポーネント作成
- [ ] ネットワーク状態検知
- [ ] 表示テキスト: 「オフライン - データは保存されています」
- [ ] テスト・Storybook追加

**参照**:
- `/aidlc-docs/design/design_brief.md` (画面7)

---

### WORK-012: マイルストーン達成の特別演出
**優先度**: 🔵 Low
**見積**: 3時間
**担当**: -

**タスク**:
- [ ] 特別演出コンポーネント作成
  - [ ] 紙吹雪アニメーション
  - [ ] 記念バッジ
- [ ] マイルストーン判定ロジック
  - [ ] 10回、50回、100回達成
  - [ ] ¥10,000、¥50,000、¥100,000突破
- [ ] テスト・Storybook追加

---

### WORK-013: 目標設定機能
**優先度**: 🔵 Low
**見積**: 4時間
**担当**: -

**タスク**:
- [ ] 目標設定UIの実装
  - [ ] 目標名称入力
  - [ ] 目標金額入力
- [ ] 進捗バー表示（ホーム画面）
- [ ] 目標達成時の祝福画面
- [ ] テスト・Storybook追加

---

## 🐛 バグ修正・技術的負債

### WORK-014: ページネーションテスト修正（Issue #11）
**優先度**: 🟡 Medium
**見積**: 1時間
**担当**: -

**背景**: LocalStorageSavingsRecordRepositoryのページネーションテストが失敗している

**タスク**:
- [ ] ソート順序の仕様を確認
  - [ ] 新しい順 vs 古い順のどちらが正しいか判断
- [ ] テストまたは実装を修正
  - [ ] オプション1: テストの期待値を修正
  - [ ] オプション2: 実装のソート順序を修正
  - [ ] オプション3: ソート順序をパラメータ化
- [ ] 修正をコミット＆プッシュ

**関連**: Issue #11

---

## 📊 進捗トラッキング

| フェーズ | タスク数 | 完了 | 進捗率 |
|----------|----------|------|--------|
| Phase 0: 緊急対応 | 1 | 1 | 100% ✅ |
| Phase 1: MVP完成 | 3 | 3 | 100% ✅ |
| Phase 2: UX向上 | 5 | 0 | 0% |
| Phase 3: PWA対応 | 4 | 0 | 0% |
| バグ修正 | 1 | 0 | 0% |
| **合計** | **14** | **4** | **29%** |

---

## 🎯 推奨実装順序

1. ~~**WORK-001** (Lintエラー修正)~~ ✅ 完了
2. ~~**WORK-002** (履歴一覧画面)~~ ✅ 完了
3. ~~**WORK-003** (設定画面)~~ ✅ 完了
4. ~~**WORK-004** (App.tsxへのナビゲーション統合)~~ ✅ 完了
5. **WORK-005** (応援メッセージバリエーション) ← 次の推奨タスク
6. **WORK-006** (我慢回数表示)
7. **WORK-007** (カウントアップアニメーション)
8. **WORK-014** (ページネーションテスト修正)
9. **WORK-008** (月別フィルター)
10. **WORK-009** (履歴削除機能)
11. その他（PWA対応など）

---

## 📝 メモ

- **🎉 MVP完成！** WORK-001〜004 が全て完了しました ✅
  - Phase 0: 緊急対応 100%完了
  - Phase 1: MVP完成 100%完了
- 次はPhase 2のUX向上（WORK-005〜007）を実施推奨
- WORK-014のバグ修正も実施可能
- WORK-008以降は余裕があれば実装
