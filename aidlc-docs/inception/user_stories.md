# ラーメン貯金 - ユーザーストーリー

## ドキュメント概要

本ドキュメントでは、各エピックに対する具体的なユーザーストーリーを定義します。
各ユーザーストーリーには、受け入れ基準、優先順位、実装の注意点を記載します。

**ユーザーストーリーのフォーマット**:
```
As a [ユーザータイプ]
I want to [やりたいこと]
So that [理由/得られる価値]
```

**優先順位の定義**:
- **Must Have**: MVP に絶対必要な機能
- **Should Have**: MVP に含めるべき機能（リソース次第で調整可能）
- **Could Have**: あると良い機能（MVP後の実装も可）
- **Won't Have**: 今回のスコープ外

---

# Epic 1: 初回セットアップ・オンボーディング

## US-1.1: Webアプリ初回アクセス時のウェルカム画面

**ユーザーストーリー**:
```
As a 新規ユーザー
I want to Webアプリに初めてアクセスしたときに、このアプリが何をするものか理解できる
So that 安心してアプリを使い始められる
```

**受け入れ基準**:
- [ ] Webアプリ初回アクセス時にウェルカム画面が表示される
- [ ] アプリの目的が明確に説明されている（「ラーメンを我慢して貯金するWebアプリ」）
- [ ] アプリの使い方が簡潔に説明されている（3ステップ以内）
- [ ] 「始める」ボタンをタップすると、次の設定画面に遷移する
- [ ] スキップ機能はない（初回セットアップは必須）
- [ ] 2回目以降のアクセスでは表示されない（ローカルストレージに保存）
- [ ] レスポンシブデザインで、スマホ・タブレット・PCいずれでも見やすい

**優先順位**: Must Have

**補足**:
- エンターテインメント性を重視し、親しみやすいデザインにする
- テキストは最小限にし、イラストやアイコンで視覚的に理解できるようにする
- 画面数は1-2画面程度に抑え、すぐに使い始められるようにする

---

## US-1.2: ラーメン価格の初期設定

**ユーザーストーリー**:
```
As a 新規ユーザー
I want to 自分がよく食べるラーメンの価格を設定できる
So that 実際の節約額を正確に記録できる
```

**受け入れ基準**:
- [ ] 初回セットアップ時にラーメン価格の設定画面が表示される
- [ ] デフォルト値として一般的な価格（例: 800円）が表示されている
- [ ] 数字入力フィールドで価格を変更できる（100円〜3,000円の範囲）
- [ ] 入力中の価格が画面上でリアルタイムに確認できる
- [ ] 「完了」ボタンをタップすると、設定が保存されてホーム画面に遷移する
- [ ] 価格が未入力または無効な値の場合は、エラーメッセージが表示される

**優先順位**: Must Have

**補足**:
- 価格設定の理由を簡潔に説明する（「あなたがよく食べるラーメンの価格を教えてください」）
- テンキー入力で素早く入力できるようにする
- 後から設定画面で変更可能であることを明示する

---

# Epic 2: 我慢の記録

## US-2.1: ラーメン我慢ボタンの表示と記録

**ユーザーストーリー**:
```
As a ユーザー
I want to ラーメンを我慢したときに、ワンタップで記録できる
So that その場ですぐに成果を記録し、達成感を得られる
```

**受け入れ基準**:
- [ ] ホーム画面に「ラーメンを我慢した！」ボタンが目立つように配置されている
- [ ] ボタンをタップすると、記録が保存される
- [ ] 記録時にタップした日時と設定されているラーメン価格が保存される
- [ ] 記録成功時に視覚的フィードバック（アニメーション、色の変化等）がある
- [ ] ボタンは押しやすい大きさとデザインになっている
- [ ] 通信不要で、オフラインでも記録できる

**優先順位**: Must Have

**補足**:
- アプリの核となる機能なので、最も目立つ位置に配置
- ボタンのデザインはエンターテインメント性を重視（楽しい、ポジティブな印象）
- タップ時の反応は即座に表示し、ユーザーを待たせない

---

## US-2.2: 記録成功時の応援メッセージ

**ユーザーストーリー**:
```
As a ユーザー
I want to ラーメンを我慢したときに、応援メッセージが表示される
So that モチベーションが上がり、次も頑張ろうと思える
```

**受け入れ基準**:
- [ ] 記録ボタンをタップすると、応援メッセージが表示される
- [ ] メッセージは複数パターン用意されており、ランダムまたは条件に応じて変わる
- [ ] メッセージの例: 「今日も頑張りました！」「素晴らしい！〇〇円GET！」「その調子！」
- [ ] メッセージと共に、今回節約した金額が表示される
- [ ] メッセージは3秒程度表示された後、自動で消える（またはタップで閉じられる）
- [ ] メッセージ表示中も、他の操作は可能

**優先順位**: Must Have

**補足**:
- メッセージはポジティブで応援する内容にする
- 連続記録数や累計金額に応じて、特別なメッセージを表示するとさらに良い（Could Have）
- エンターテインメント性を高めるため、アニメーションや効果音も検討（Could Have）

---

## US-2.3: 記録の即時反映

**ユーザーストーリー**:
```
As a ユーザー
I want to 記録した内容が即座にホーム画面の貯金額に反映される
So that 成果をリアルタイムに実感できる
```

**受け入れ基準**:
- [ ] 記録ボタンをタップすると、ホーム画面の総貯金額が即座に更新される
- [ ] 今月の節約額も同時に更新される
- [ ] 我慢回数のカウントも増加する
- [ ] 更新時にアニメーション効果がある（数字がカウントアップする等）
- [ ] 更新は1秒以内に完了する

**優先順位**: Must Have

**補足**:
- 数字の変化を視覚的に強調し、達成感を高める
- アニメーションは派手すぎず、心地よい程度にする

---

# Epic 3: 貯金額の可視化

## US-3.1: ホーム画面での総貯金額表示

**ユーザーストーリー**:
```
As a ユーザー
I want to アプリを開いたときに、これまでに貯めた総額が一目で分かる
So that 自分の成果を実感でき、モチベーションが維持できる
```

**受け入れ基準**:
- [ ] ホーム画面に総貯金額が大きく目立つように表示されている
- [ ] 金額は「¥」マークと共に表示される（例: ¥12,800）
- [ ] 3桁ごとにカンマ区切りで表示される
- [ ] 初回起動時は「¥0」と表示される
- [ ] フォントサイズは十分に大きく、視認性が高い
- [ ] 背景やデザインにより、金額が目立つようになっている

**優先順位**: Must Have

**補足**:
- 総貯金額は画面の上部中央など、最も目立つ位置に配置
- エンターテインメント性を重視し、楽しいデザインにする
- 金額が増えるほど、ユーザーが嬉しくなるような演出を検討

---

## US-3.2: 今月の節約額表示

**ユーザーストーリー**:
```
As a ユーザー
I want to 今月どれだけ節約できたかを確認できる
So that 月単位での成果を把握し、達成感を得られる
```

**受け入れ基準**:
- [ ] ホーム画面に「今月の節約額」が表示されている
- [ ] 金額は「¥」マークと共に表示される（例: 今月: ¥3,200）
- [ ] 月が変わると自動的にリセットされ、新しい月の集計が始まる
- [ ] 総貯金額とは別に、明確に区別できるデザインになっている
- [ ] 月初（1日）は「¥0」からスタートする

**優先順位**: Must Have

**補足**:
- 今月の節約額は、総貯金額の近くに配置（視覚的な関連性を持たせる）
- 「先月の節約額」も表示できると、さらにモチベーションが上がる（Could Have）

---

## US-3.3: 我慢回数の表示

**ユーザーストーリー**:
```
As a ユーザー
I want to これまでに何回ラーメンを我慢したかを確認できる
So that 回数でも自分の頑張りを実感できる
```

**受け入れ基準**:
- [ ] ホーム画面に累計我慢回数が表示されている
- [ ] 表示形式は「〇〇回我慢しました！」または「我慢回数: 〇〇回」
- [ ] 初回起動時は「0回」と表示される
- [ ] 記録するたびに1回ずつ増加する
- [ ] 総回数と今月の回数の両方が表示される（Should Have）

**優先順位**: Should Have

**補足**:
- 金額だけでなく、回数でも達成感を得られるようにする
- 「10回達成！」などのマイルストーン表示も効果的（Could Have）

---

# Epic 4: 履歴管理

## US-4.1: 我慢履歴の一覧表示

**ユーザーストーリー**:
```
As a ユーザー
I want to 過去にいつラーメンを我慢したかを一覧で確認できる
So that 自分の頑張りを振り返り、モチベーションを維持できる
```

**受け入れ基準**:
- [ ] ホーム画面から履歴画面に遷移できるボタン/タブがある
- [ ] 履歴画面には、我慢した記録が新しい順に一覧表示される
- [ ] 各記録には以下の情報が表示される:
  - [ ] 日付（例: 2025年12月1日）
  - [ ] 時刻（例: 19:30）
  - [ ] 節約額（例: ¥800）
- [ ] 一覧はスクロール可能で、すべての記録を確認できる
- [ ] 記録がない場合は、「まだ記録がありません」というメッセージが表示される

**優先順位**: Must Have

**補足**:
- シンプルなリスト形式で十分（MVPでは凝ったデザインは不要）
- 日付ごとにグループ化して表示すると見やすい（Should Have）
- 「今日」「昨日」などの相対的な日付表示も親しみやすい（Could Have）

---

## US-4.2: 月別の履歴表示切り替え

**ユーザーストーリー**:
```
As a ユーザー
I want to 特定の月の記録だけを表示できる
So that 月ごとの成果を振り返りやすい
```

**受け入れ基準**:
- [ ] 履歴画面に月選択のUI（ドロップダウンまたはカレンダー）がある
- [ ] デフォルトでは「今月」の記録が表示される
- [ ] 月を変更すると、その月の記録のみが表示される
- [ ] 記録がない月は「この月は記録がありません」と表示される
- [ ] 月ごとの合計金額と回数も表示される

**優先順位**: Should Have

**補足**:
- MVP では簡易的な実装でも可（例: 「今月」「先月」「全期間」の3つの選択肢）
- 将来的にはカレンダーUIで直感的に選択できると良い

---

## US-4.3: 履歴の削除（誤記録の修正）

**ユーザーストーリー**:
```
As a ユーザー
I want to 誤って記録してしまった場合に、その記録を削除できる
So that 正確な記録を保てる
```

**受け入れ基準**:
- [ ] 履歴一覧の各項目をスワイプまたは長押しすると、削除オプションが表示される
- [ ] 削除ボタンをタップすると、確認ダイアログが表示される
- [ ] 確認ダイアログで「削除」を選択すると、その記録が削除される
- [ ] 削除すると、総貯金額と今月の節約額から該当金額が差し引かれる
- [ ] 削除操作は取り消せない（またはUndo機能がある）

**優先順位**: Should Have

**補足**:
- 誤操作による削除を防ぐため、確認ダイアログは必須
- 削除機能は目立ちすぎないようにする（メイン機能ではないため）

---

# Epic 5: 設定・カスタマイズ

## US-5.1: ラーメン価格の変更

**ユーザーストーリー**:
```
As a ユーザー
I want to 設定画面からラーメンの価格を変更できる
So that 価格が変わったときや、より正確な金額に調整できる
```

**受け入れ基準**:
- [ ] ホーム画面から設定画面に遷移できる
- [ ] 設定画面に現在のラーメン価格が表示されている
- [ ] 価格を変更できる入力フィールドがある（100円〜3,000円）
- [ ] 「保存」ボタンをタップすると、新しい価格が保存される
- [ ] 保存後、「設定を更新しました」というメッセージが表示される
- [ ] 次回の記録から新しい価格が適用される（過去の記録は変更されない）
- [ ] 無効な値を入力した場合はエラーメッセージが表示される

**優先順位**: Must Have

**補足**:
- 過去の記録の価格は変更しない（履歴の整合性を保つため）
- 価格変更の履歴を残すと、ユーザーが混乱しない（Could Have）

---

## US-5.2: 設定画面の基本情報表示

**ユーザーストーリー**:
```
As a ユーザー
I want to 設定画面でアプリの情報や設定を確認できる
So that アプリを理解し、必要に応じて調整できる
```

**受け入れ基準**:
- [ ] 設定画面に以下の情報が表示される:
  - [ ] 現在のラーメン価格
  - [ ] アプリバージョン
  - [ ] 利用規約へのリンク（あれば）
  - [ ] プライバシーポリシーへのリンク（あれば）
- [ ] 各項目は分かりやすくグループ化されている
- [ ] 設定画面から簡単にホーム画面に戻れる

**優先順位**: Should Have

**補足**:
- MVP では最小限の情報のみでOK
- 将来的には、通知設定やテーマ変更などの機能を追加予定

---

# Epic 6: データ管理・バックアップ

## US-6.1: ローカルストレージへの自動保存

**ユーザーストーリー**:
```
As a ユーザー
I want to アプリのデータがブラウザに自動的に保存される
So that ブラウザを閉じても、次回アクセス時にデータが残っている
```

**受け入れ基準**:
- [ ] アプリのデータ（記録、設定）がブラウザのlocalStorageに自動保存される
- [ ] 保存は記録追加時や設定変更時に自動で実行される
- [ ] localStorageが使用できない場合は、警告メッセージが表示される
- [ ] 保存処理はバックグラウンドで実行され、ユーザー操作を妨げない
- [ ] 保存失敗時は、適切なエラーメッセージが表示される
- [ ] ブラウザを閉じて再度開いても、データが保持されている

**優先順位**: Must Have

**補足**:
- ユーザーに意識させない、シームレスな体験を目指す
- データはJSON形式でシリアライズして保存
- localStorage容量制限（通常5MB）を考慮した設計
- プライベートブラウジングモードでは制限があることを考慮

---

## US-6.2: データのエクスポート機能

**ユーザーストーリー**:
```
As a ユーザー
I want to 自分のデータをファイルとしてダウンロードできる
So that デバイス変更時やバックアップとして保存できる
```

**受け入れ基準**:
- [ ] 設定画面に「データをエクスポート」ボタンがある
- [ ] ボタンをタップすると、JSON形式のファイルがダウンロードされる
- [ ] ファイル名は「ramen-chokin_YYYYMMDD_HHMMSS.json」形式
- [ ] エクスポートファイルには全ての記録と設定が含まれる
- [ ] エクスポート完了時に成功メッセージが表示される
- [ ] データがない場合は、エクスポートできない旨のメッセージが表示される

**優先順位**: Should Have

**補足**:
- JSON形式なので、テキストエディタで内容を確認可能
- データ形式にバージョン情報を含め、将来の互換性を考慮
- 個人情報は含まれないが、ファイルの取り扱いには注意するよう促す

---

## US-6.3: データのインポート機能

**ユーザーストーリー**:
```
As a ユーザー
I want to エクスポートしたファイルからデータを復元できる
So that デバイス変更時や誤ってデータを削除した際に、過去のデータを取り戻せる
```

**受け入れ基準**:
- [ ] 設定画面に「データをインポート」ボタンがある
- [ ] ボタンをタップすると、ファイル選択ダイアログが開く
- [ ] JSON形式のファイルを選択できる
- [ ] 選択したファイルの内容が検証される（フォーマット、バージョン等）
- [ ] インポート前に確認ダイアログが表示される（「現在のデータが上書きされます」）
- [ ] インポート成功時に、データが復元されホーム画面に遷移する
- [ ] 無効なファイルの場合は、エラーメッセージが表示される
- [ ] インポート失敗時は、既存データは保持される

**優先順位**: Should Have

**補足**:
- インポート前に現在のデータを自動的にエクスポートすることを推奨
- ファイルの互換性チェックは厳密に行う
- 古いバージョンのエクスポートファイルにも対応できるようにする（下位互換性）

---

# ストーリーポイントとスプリント計画（参考）

以下は開発チーム向けの参考情報です。

## スプリント1（基盤構築）: 2週間
- US-1.1: ウェルカム画面 [3pt]
- US-1.2: 初期設定 [3pt]
- US-3.1: ホーム画面の総貯金額表示 [2pt]
- US-6.1: ローカルストレージ実装 [3pt]
- レスポンシブデザイン対応 [3pt]

**合計: 14pt**

## スプリント2（コア機能）: 2週間
- US-2.1: 我慢ボタンと記録 [5pt]
- US-2.2: 応援メッセージ [2pt]
- US-2.3: 記録の即時反映 [2pt]
- US-3.2: 今月の節約額 [2pt]
- US-3.3: 我慢回数表示 [1pt]
- US-5.1: 価格変更機能 [3pt]

**合計: 15pt**

## スプリント3（履歴と最終調整）: 2週間
- US-4.1: 履歴一覧 [5pt]
- US-4.2: 月別表示 [3pt]
- US-4.3: 履歴削除 [3pt]
- US-5.2: 設定画面 [2pt]
- US-6.2: データエクスポート [2pt]
- US-6.3: データインポート [2pt]
- バグ修正・調整 [3pt]

**合計: 20pt**

---

# 次のステップ
ストーリーマッピングを作成し、ユーザージャーニーに沿った機能の流れを可視化します。
